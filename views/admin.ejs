<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <%- include('partials/header') %>

    <main>
        <h1>Admin Dashboard</h1>
    
        <section id="admin-users">
            <h2>Users</h2>
            <ul>
                <% users.forEach(user => { %>
                    <li>
                        <strong><%= user.username %></strong> 
                        (<%= user.role %>) 
                        <% if (user.role !== 'admin') { %>
                            <form action="/admin/delete-user/<%= user._id %>" method="post" style="display: inline;">
                                <button type="submit">Delete</button>
                            </form>                            
                        <% } %>
                <a href="/profile/<%= user.username %>" class="action-button">View Profile</a>
                    </li>
                <% }); %>
            </ul>
        </section>
    
        <section id="admin-messages">
            <h2>Messages</h2>
            <ul>
                <% messages.forEach(message => { %>
                    <li>
                        <strong><%= message.sender %></strong><%= message.text %> 
                        <span>(<%= new Date(message.timestamp).toLocaleString() %>)</span>
                    </li>
                <% }); %>
            </ul>
        </section>
    </main>
    